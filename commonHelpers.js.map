{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport errorIcon from '../img/error.svg?url';\nconsole.log(errorIcon)\n\n\n\n\nconst input = document.querySelector(\"#datetime-picker\");\nconst btn = document.querySelector(\"[data-start]\");\nconst timer = document.querySelectorAll(\".field\");\nlet userSelectedDate = null;\nlet intervalId = null;\n\nbtn.setAttribute(\"disabled\", \"true\");\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onChange() {\n        const timerOnChenge = [...timer].map((el) => {\n            el.firstElementChild.textContent = \"00\";\n            clearInterval(intervalId);\n        });\n    },\n    onClose(selectedDates) {\n      userSelectedDate = selectedDates[0];\n      if(userSelectedDate < new Date()) {\n            iziToast.error({\n                title: ' ',\n                message: 'Please choose a date in the future',\n                // iconUrl: `${sprite}#icon-error`,\n                iconUrl: errorIcon,\n                titleSize: '16px',\n                titleLineHeight: '24px',\n                messageColor: 'white',\n                messageSize: '16px',\n                messageLineHeight: '24px',\n                backgroundColor: '#ef4040',\n                iconColor: '#ffffff',\n                titleColor: '#ffffff',\n                messageColor: '#ffffff',\n                close: false,\n                position: 'topRight',\n            });\n            clearInterval(intervalId);\n        btn.setAttribute(\"disabled\", \"true\");\n      } else {\n        btn.removeAttribute(\"disabled\");\n      }\n    },\n  };\nconst fp = flatpickr(input, options);\n\nbtn.addEventListener(\"click\", handleClick);\n\nfunction handleClick(event) {\n\n    intervalId = setInterval(() => {\n        const currentDate = new Date();\n        const leftTime = userSelectedDate - currentDate;\n        const timerObj = convertMs(leftTime);\n        const keys = Object.keys(timerObj);\n        const timerInProcess = [...timer].map((el) => {\n            for(const key of keys) {\n                if(el.lastElementChild.textContent.toLowerCase() === key) {\n                    el.firstElementChild.textContent = addLeadingZero(timerObj[key]);\n                };\n            };\n        })\n    }, 1000);\n    const stopTimerId = setInterval(() => {\n        const isTimerDone = [...timer].every((el) => el.firstElementChild.textContent == \"00\");\n        if(isTimerDone) {\n            clearInterval(intervalId);\n            clearInterval(stopTimerId);\n        }\n    }, 1000);\n    event.target.disabled = true;\n}\n\n\n\n\n\nfunction convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n  \n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds };\n  }\n  \nfunction addLeadingZero(value) {\n    return String(value).padStart(2, \"0\")\n}"],"names":["errorIcon","input","btn","timer","userSelectedDate","intervalId","options","el","selectedDates","iziToast","flatpickr","handleClick","event","leftTime","timerObj","convertMs","keys","key","addLeadingZero","stopTimerId","ms","days","hours","minutes","seconds","value"],"mappings":"0IAKA,QAAQ,IAAIA,CAAS,EAKrB,MAAMC,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAM,SAAS,cAAc,cAAc,EAC3CC,EAAQ,SAAS,iBAAiB,QAAQ,EAChD,IAAIC,EAAmB,KACnBC,EAAa,KAEjBH,EAAI,aAAa,WAAY,MAAM,EAEnC,MAAMI,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,UAAW,CACe,CAAC,GAAGH,CAAK,EAAE,IAAKI,GAAO,CACzCA,EAAG,kBAAkB,YAAc,KACnC,cAAcF,CAAU,CACpC,CAAS,CACJ,EACD,QAAQG,EAAe,CACrBJ,EAAmBI,EAAc,CAAC,EAC/BJ,EAAmB,IAAI,MACpBK,EAAS,MAAM,CACX,MAAO,IACP,QAAS,qCAET,QAAST,EACT,UAAW,OACX,gBAAiB,OACjB,aAAc,QACd,YAAa,OACb,kBAAmB,OACnB,gBAAiB,UACjB,UAAW,UACX,WAAY,UACZ,aAAc,UACd,MAAO,GACP,SAAU,UAC1B,CAAa,EACD,cAAcK,CAAU,EAC5BH,EAAI,aAAa,WAAY,MAAM,GAEnCA,EAAI,gBAAgB,UAAU,CAEjC,CACL,EACWQ,EAAUT,EAAOK,CAAO,EAEnCJ,EAAI,iBAAiB,QAASS,CAAW,EAEzC,SAASA,EAAYC,EAAO,CAExBP,EAAa,YAAY,IAAM,CAE3B,MAAMQ,EAAWT,EADG,IAAI,KAElBU,EAAWC,EAAUF,CAAQ,EAC7BG,EAAO,OAAO,KAAKF,CAAQ,EACV,CAAC,GAAGX,CAAK,EAAE,IAAKI,GAAO,CAC1C,UAAUU,KAAOD,EACVT,EAAG,iBAAiB,YAAY,YAAW,IAAOU,IACjDV,EAAG,kBAAkB,YAAcW,EAAeJ,EAASG,CAAG,CAAC,GAG1E,CACJ,EAAE,GAAI,EACP,MAAME,EAAc,YAAY,IAAM,CACd,CAAC,GAAGhB,CAAK,EAAE,MAAOI,GAAOA,EAAG,kBAAkB,aAAe,IAAI,IAEjF,cAAcF,CAAU,EACxB,cAAcc,CAAW,EAEhC,EAAE,GAAI,EACPP,EAAM,OAAO,SAAW,EAC5B,CAMA,SAASG,EAAUK,EAAI,CAQnB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAEH,SAASN,EAAeO,EAAO,CAC3B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC"}