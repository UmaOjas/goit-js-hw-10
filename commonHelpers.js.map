{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n// import errorIcon from '../img/error.svg?url';\nimport sprite from \"../img/spriteNew.svg#icon-error\";\n// console.log(errorIcon)\n\n\n\n\nconst input = document.querySelector(\"#datetime-picker\");\nconst btn = document.querySelector(\"[data-start]\");\nconst timer = document.querySelectorAll(\".field\");\nlet userSelectedDate = null;\nlet intervalId = null;\n\nbtn.setAttribute(\"disabled\", \"true\");\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n      userSelectedDate = selectedDates[0];\n      if(userSelectedDate < new Date()) {\n            iziToast.error({\n                title: ' ',\n                message: 'Please choose a date in the future',\n                // iconUrl: `${sprite}#icon-error`,\n                iconUrl: '../img/error.png',\n                // iconUrl: errorIcon,\n                titleSize: '16px',\n                titleLineHeight: '24px',\n                messageColor: 'white',\n                messageSize: '16px',\n                messageLineHeight: '24px',\n                backgroundColor: '#ef4040',\n                iconColor: '#ffffff',\n                titleColor: '#ffffff',\n                messageColor: '#ffffff',\n                close: false,\n                position: 'topRight',\n                timeout: 500000,\n            });\n        btn.setAttribute(\"disabled\", \"true\");\n      } else {\n        btn.removeAttribute(\"disabled\");\n        input.setAttribute(\"disabled\", \"true\")\n      }\n    },\n  };\nconst fp = flatpickr(input, options);\n\nbtn.addEventListener(\"click\", handleClick);\n\nfunction handleClick(event) {\n\n    intervalId = setInterval(() => {\n        const currentDate = new Date();\n        const leftTime = userSelectedDate - currentDate;\n        const timerObj = convertMs(leftTime);\n        const keys = Object.keys(timerObj);\n        const timerInProcess = [...timer].map((el) => {\n            for(const key of keys) {\n                if(el.lastElementChild.textContent.toLowerCase() === key) {\n                    el.firstElementChild.textContent = addLeadingZero(timerObj[key]);\n                };\n            };\n        })\n    }, 1000);\n    const stopTimerId = setInterval(() => {\n        const isTimerDone = [...timer].every((el) => el.firstElementChild.textContent == \"00\");\n        if(isTimerDone) {\n            clearInterval(intervalId);\n            clearInterval(stopTimerId);\n            input.removeAttribute(\"disabled\");\n        }\n    }, 1000);\n    event.target.disabled = true;\n}\n\n\n\n\n\nfunction convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n  \n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds };\n  }\n  \nfunction addLeadingZero(value) {\n    return String(value).padStart(2, \"0\")\n}"],"names":["input","btn","timer","userSelectedDate","intervalId","options","selectedDates","iziToast","flatpickr","handleClick","event","leftTime","timerObj","convertMs","keys","el","key","addLeadingZero","stopTimerId","ms","days","hours","minutes","seconds","value"],"mappings":"+IAWA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAM,SAAS,cAAc,cAAc,EAC3CC,EAAQ,SAAS,iBAAiB,QAAQ,EAChD,IAAIC,EAAmB,KACnBC,EAAa,KAEjBH,EAAI,aAAa,WAAY,MAAM,EAEnC,MAAMI,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBH,EAAmBG,EAAc,CAAC,EAC/BH,EAAmB,IAAI,MACpBI,EAAS,MAAM,CACX,MAAO,IACP,QAAS,qCAET,QAAS,mBAET,UAAW,OACX,gBAAiB,OACjB,aAAc,QACd,YAAa,OACb,kBAAmB,OACnB,gBAAiB,UACjB,UAAW,UACX,WAAY,UACZ,aAAc,UACd,MAAO,GACP,SAAU,WACV,QAAS,GACzB,CAAa,EACLN,EAAI,aAAa,WAAY,MAAM,IAEnCA,EAAI,gBAAgB,UAAU,EAC9BD,EAAM,aAAa,WAAY,MAAM,EAExC,CACL,EACWQ,EAAUR,EAAOK,CAAO,EAEnCJ,EAAI,iBAAiB,QAASQ,CAAW,EAEzC,SAASA,EAAYC,EAAO,CAExBN,EAAa,YAAY,IAAM,CAE3B,MAAMO,EAAWR,EADG,IAAI,KAElBS,EAAWC,EAAUF,CAAQ,EAC7BG,EAAO,OAAO,KAAKF,CAAQ,EACV,CAAC,GAAGV,CAAK,EAAE,IAAKa,GAAO,CAC1C,UAAUC,KAAOF,EACVC,EAAG,iBAAiB,YAAY,YAAW,IAAOC,IACjDD,EAAG,kBAAkB,YAAcE,EAAeL,EAASI,CAAG,CAAC,GAG1E,CACJ,EAAE,GAAI,EACP,MAAME,EAAc,YAAY,IAAM,CACd,CAAC,GAAGhB,CAAK,EAAE,MAAOa,GAAOA,EAAG,kBAAkB,aAAe,IAAI,IAEjF,cAAcX,CAAU,EACxB,cAAcc,CAAW,EACzBlB,EAAM,gBAAgB,UAAU,EAEvC,EAAE,GAAI,EACPU,EAAM,OAAO,SAAW,EAC5B,CAMA,SAASG,EAAUM,EAAI,CAQnB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAEH,SAASN,EAAeO,EAAO,CAC3B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC"}